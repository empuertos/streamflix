<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Player - StreamFlix</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üé¨</text></svg>">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="player.css">
</head>
<body>
    <div id="loading" class="loading">
        <div class="loading-spinner"></div>
        <p>Loading movie player...</p>
    </div>

    <div id="error" class="error" style="display: none;">
        <h3>‚ö†Ô∏è Error Loading Movie</h3>
        <p>Could not load the movie player. Please try again.</p>
        <button class="retry-btn" id="retryBtn">Retry</button>
        <button class="back-btn" onclick="window.history.back()">Go Back</button>
    </div>

    <div id="playerContainer" class="player-container" style="display: none;">
        <div class="controls">
            <div class="player-actions">
                <button class="refresh-btn" id="refreshBtn">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
                <button class="close-player-btn" id="closePlayerBtn">
                    <i class="fas fa-times"></i> Close Player
                </button>
                <button class="pip-btn" id="pipBtn" style="display: none;">
                    <i class="fas fa-clone"></i> PiP
                </button>
                <button class="prev-episode-btn" id="prevEpisodeBtn" style="display: none;">
                    <i class="fas fa-arrow-left"></i> Prev Episode
                </button>
                <button class="next-episode-btn" id="nextEpisodeBtn" style="display: none;">
                    Next Episode <i class="fas fa-arrow-right"></i>
                </button>
            </div>
            <div class="movie-info">
                <img src="" alt="Poster" id="moviePoster" class="movie-poster-small">
                <span class="movie-title" id="movieTitle">Loading...</span>
            </div>
            <div class="provider-buttons" id="providerButtons">
                <!-- Provider buttons will be loaded here -->
            </div>
        </div>
        <iframe 
            id="movieFrame" 
            class="movie-iframe" 
            allowfullscreen 
            allow="autoplay; picture-in-picture; encrypted-media; gyroscope"
            sandbox="allow-forms allow-pointer-lock allow-same-origin allow-scripts allow-top-navigation"
        ></iframe>

        <div id="episodeLoadingOverlay" class="episode-loading-overlay" style="display: none;">
            <div class="loading-spinner"></div>
            <p>Loading episode...</p>
        </div>

        <!-- Autoplay Overlay -->
        <div id="autoplayOverlay" class="autoplay-overlay">
            <div class="autoplay-countdown">
                <p>Next episode in</p>
                <span id="autoplayCountdown">15</span>
            </div>
            <button id="autoplayCancelBtn" class="autoplay-cancel-btn">Cancel</button>
        </div>
    </div>

    <script src="config.js"></script>
    <script src="js/player.js"></script>
</body>
</html>
